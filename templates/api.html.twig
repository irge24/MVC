{% block body %}
<header class="site-header">
    <span>My JSON routes</span>
</header>

<ul>
    <li><a href="{{ path('api_quote') }}">Quote - Get a random quote</a></li>
    <li><a href="{{ path('api_deck') }}">Deck - A whole card deck sorted by colour and value</a></li>
</ul>

<button id="shuffle">Shuffle deck</button>
<button id="draw1">Draw 1 card</button>
<input type="number" id="drawNum" min="1">
<button id="drawCustom">Draw number of cards</button>

<pre id="output"></pre>

<script>
function showOutput(data) {
    document.getElementById("output").innerText = JSON.stringify(data, null, 2);
}

// Shuffle
document.getElementById("shuffle").addEventListener("click", async () => {
    let response = await fetch("/api/deck/shuffle", { method: "POST" });
    let data = await response.json();
    showOutput(data);
});

// Draw 1 card
document.getElementById("draw1").addEventListener("click", async () => {
    let response = await fetch("/api/deck/draw", { method: "POST" });
    let data = await response.json();
    showOutput(data);
});

// Draw custom number of cards
document.getElementById("drawCustom").addEventListener("click", async () => {
    let num = document.getElementById("drawNum").value;
    let response = await fetch("/api/deck/draw/" + num, { method: "POST" });
    let data = await response.json();
    showOutput(data);
});
</script>

{% endblock %}
